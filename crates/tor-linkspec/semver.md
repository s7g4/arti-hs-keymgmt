MODIFIED: New API to restrict addr on an OwnedChanTarget.
BREAKING: write() functions now return a Result.
