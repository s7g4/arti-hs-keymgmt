MODIFIED: Error::BadMessage is deprecated, Error::InvalidMessage is new.
MODIFIED: New SliceWriter type.
