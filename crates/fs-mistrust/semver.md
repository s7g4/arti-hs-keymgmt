MODIFIED: New facilities to configure how we look at the environment.
BREAKING: Some functions and types were remove when targeting iOS.
